<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    // 5. JSON 객체
    // 데이터를 저장하거나 전송할 때 많이 사용되는 경량의 DATA 교환 형식
    // 특정 통신 방법도 프로그래밍 문법도 아닌 단순히 데이터를 표시하는 방법임(=텍스트 포맷)

    // JavaScript Object Notation: 자바스크립트 객체 표기법
    // 자바스크립트 객체에서 영감을 받아 만들어진 표기법
    // Object { key: value }
    // JSON { "key": "value" }

    // JSON의 특징 정리
    // - 서버와 클라이언트 간의 데이터 전송 시 많이 사용
    // - 자바스크립트의 Object 객체 표기법과 매우 유사한 일반 텍스트(반드시 큰 따옴표 사용)
    // - 프로그래밍 언어에 독립적: 언어에 상관없이 사용할 수 있는 데이터 교환 형식
    // (오해 NO~ 자바스크립트 객체에서 파생됐지만 JSON 형식은 어쨌든 텍스트임)
    // - 대부분의 언어에서 JSON 데이터를 처리할 수 있는 라이브러리를 제공

    document.write('<h1>JSON 객체</h1>');

    // 1) JSON.stringify()
    // 데이터를 서버로 전송하기 위해서는 데이터 형태를 문자열 형태로 변환해야 함
    // stringify 함수를 사용하여 Object 데이터를 문자열로 변환
    const teacher = {
      name: 'BoYeong',
      age: 30,
      isAdmin: true,
      courses:['html', 'css', 'js'],
      wife: null
    };

    const jsonString = JSON.stringify(teacher); // 객체를 문자열로 전환
    console.log(jsonString);
    console.log(typeof jsonString);
    /* JSON으로 인코딩된 객체:
      {"name":"BoYeong","age":30,"isAdmin":true,"courses":["html","css","js"],"wife":null}
    */

    // 2) JSON.parse()
    // 서버로부터 응답받은 데이터는 문자열 형태임
    // parse 함수를 사용하여 Object 데이터로 변환
    const text = '{"name":"BoYeong","age":30,"isAdmin":true,"courses":["html","css","js"],"wife":null}';  
    // 이 형태를 반드시 지켜야함!! 1)반드시 큰따옴표("") 2) '객체 형태'
    const obj = JSON.parse(text); // 문자열 형태의 JSON을 Object 객체로 변환
    console.log(obj);
     // (참고)
    // Object -- serialize(직렬화) --> JSON(string 타입)
    // Object <-- deserialize(역직렬화) -- JSON(string 타입)

    // Quiz: 객체를 JSON으로 바꾼 후 다시 객체로 바꾸기
    // user를 JSON 형태의 문자열로 바꾼 다음 이를 다시 객체로 바꾼 후 user2 변수에 저장해보세요.
    const user = {
      name: 'Goni Kim',
      age: 35
    };
    const str1 = JSON.stringify(user);
    console.log(str1);
    const user2 = JSON.parse(str1);
    console.log(user2);

  </script>
</body>
</html>